<template>
  <div class="card">
    <h3>Was this article helpful?</h3>

    <div class="faces margin-m top">
      <div class="button">
        <button 
          @click="yes($event)"
          aria-label="This article was helpful"
          aria-pressed="false"
          class="aria-btn">
          <svg width="73" height="73" viewBox="0 0 73 73" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="background" d="M36.423 70.6853C55.3545 70.6853 70.7014 55.3383 70.7014 36.4069C70.7014 17.4754 55.3545 2.12842 36.423 2.12842C17.4915 2.12842 2.14453 17.4754 2.14453 36.4069C2.14453 55.3383 17.4915 70.6853 36.423 70.6853Z" fill="#C4C4C4"/>
            <circle cx="50%" cy="50%" r="0%" fill="#FFD275">
              <animate 
                attributeName="r" 
                begin="yes.begin"
                dur="0.2s" 
                from="0%" 
                to="50%"  
                keySplines=".17 .67 .83 .67"
                fill="freeze"
                id="yes" />
            </circle>
            <path d="M36.4216 72.1136C29.3595 72.1136 22.4559 70.0195 16.584 66.096C10.712 62.1725 6.13543 56.5958 3.43287 50.0713C0.730315 43.5467 0.0232027 36.3673 1.40095 29.4409C2.77871 22.5145 6.17944 16.1521 11.1731 11.1585C16.1668 6.16479 22.5291 2.76406 29.4555 1.38631C36.382 0.00855428 43.5614 0.715667 50.0859 3.41822C56.6105 6.12078 62.1871 10.6974 66.1106 16.5693C70.0341 22.4413 72.1283 29.3448 72.1283 36.4069C72.1283 36.7857 71.9778 37.149 71.71 37.4169C71.4421 37.6847 71.0788 37.8352 70.7 37.8352C70.3212 37.8352 69.9579 37.6847 69.6901 37.4169C69.4222 37.149 69.2718 36.7857 69.2718 36.4069C69.2718 29.9098 67.3451 23.5585 63.7355 18.1563C60.1259 12.7542 54.9954 8.54367 48.9928 6.05732C42.9902 3.57097 36.3851 2.92042 30.0128 4.18796C23.6405 5.45549 17.7872 8.58416 13.193 13.1783C8.59881 17.7725 5.47014 23.6259 4.2026 29.9982C2.93507 36.3705 3.58562 42.9756 6.07197 48.9781C8.55832 54.9807 12.7688 60.1112 18.171 63.7209C23.5732 67.3305 29.9244 69.2571 36.4216 69.2571C36.8004 69.2571 37.1637 69.4076 37.4315 69.6754C37.6994 69.9433 37.8498 70.3066 37.8498 70.6854C37.8498 71.0642 37.6994 71.4275 37.4315 71.6953C37.1637 71.9632 36.8004 72.1136 36.4216 72.1136Z" fill="#393D3F"/>
            <path d="M36.8406 61.4114H36.3074C25.7382 61.1638 15.8355 53.6416 13.2837 44.0246C13.2282 43.8408 13.2103 43.6476 13.2311 43.4567C13.2519 43.2658 13.3109 43.0811 13.4048 42.9136C13.4986 42.746 13.6253 42.5991 13.7772 42.4816C13.9291 42.3642 14.1031 42.2785 14.2888 42.2299C14.4746 42.1812 14.6683 42.1704 14.8583 42.1983C15.0482 42.2262 15.2307 42.2921 15.3946 42.3921C15.5585 42.4921 15.7006 42.6241 15.8124 42.7802C15.9242 42.9364 16.0033 43.1135 16.045 43.3009C18.2922 51.6991 27.0332 58.2501 36.4026 58.5358H36.8406C45.9815 58.5358 55.0273 50.4613 56.7983 43.3009C56.8287 43.105 56.8996 42.9175 57.0065 42.7504C57.1133 42.5834 57.2538 42.4404 57.419 42.3306C57.5841 42.2209 57.7703 42.1467 57.9657 42.1128C58.1611 42.0789 58.3614 42.0861 58.5538 42.1339C58.7463 42.1817 58.9267 42.269 59.0835 42.3903C59.2404 42.5117 59.3703 42.6643 59.4649 42.8386C59.5595 43.0129 59.6168 43.2049 59.6331 43.4026C59.6494 43.6002 59.6244 43.7991 59.5596 43.9865C57.5029 52.3657 47.4098 61.4114 36.8406 61.4114Z" fill="#393D3F"/>
            <path d="M27.5861 33.9695C27.3978 33.9721 27.2109 33.9369 27.0365 33.866C26.862 33.7952 26.7036 33.6901 26.5704 33.5569C26.4373 33.4238 26.3322 33.2653 26.2613 33.0909C26.1904 32.9164 26.1552 32.7295 26.1578 32.5413C26.2762 31.2771 25.8967 30.0166 25.1001 29.0279C24.3034 28.0392 23.1525 27.4003 21.892 27.2472C20.6207 27.4002 19.4606 28.0472 18.6624 29.0485C17.8642 30.0498 17.4921 31.325 17.6263 32.5984C17.6263 32.9772 17.4758 33.3405 17.208 33.6083C16.9401 33.8762 16.5768 34.0267 16.198 34.0267C15.8192 34.0267 15.4559 33.8762 15.1881 33.6083C14.9202 33.3405 14.7697 32.9772 14.7697 32.5984C14.6973 31.5945 14.8246 30.5863 15.1441 29.6319C15.4636 28.6775 15.9692 27.7959 16.6314 27.038C17.2937 26.2801 18.0996 25.661 19.0025 25.2164C19.9054 24.7718 20.8875 24.5106 21.892 24.4478C22.8966 24.5106 23.8786 24.7718 24.7816 25.2164C25.6845 25.661 26.4904 26.2801 27.1527 27.038C27.8149 27.7959 28.3204 28.6775 28.64 29.6319C28.9595 30.5863 29.0868 31.5945 29.0143 32.5984C28.9996 32.9672 28.8426 33.316 28.5763 33.5716C28.3101 33.8272 27.9552 33.9698 27.5861 33.9695Z" fill="#393D3F"/>
            <path d="M56.6447 33.9695C56.4564 33.9721 56.2695 33.9369 56.0951 33.866C55.9206 33.7952 55.7622 33.6901 55.629 33.5569C55.4959 33.4238 55.3908 33.2653 55.3199 33.0909C55.249 32.9164 55.2138 32.7295 55.2164 32.5413C55.3348 31.2771 54.9553 30.0166 54.1587 29.0279C53.362 28.0392 52.2111 27.4003 50.9506 27.2472C49.6793 27.4002 48.5192 28.0472 47.721 29.0485C46.9228 30.0498 46.5507 31.325 46.6849 32.5984C46.6849 32.9772 46.5344 33.3405 46.2665 33.6083C45.9987 33.8762 45.6354 34.0267 45.2566 34.0267C44.8778 34.0267 44.5145 33.8762 44.2467 33.6083C43.9788 33.3405 43.8283 32.9772 43.8283 32.5984C43.7559 31.5945 43.8832 30.5863 44.2027 29.6319C44.5222 28.6775 45.0277 27.7959 45.69 27.038C46.3523 26.2801 47.1582 25.661 48.0611 25.2164C48.964 24.7718 49.9461 24.5106 50.9506 24.4478C51.9551 24.5106 52.9372 24.7718 53.8402 25.2164C54.7431 25.661 55.549 26.2801 56.2113 27.038C56.8735 27.7959 57.379 28.6775 57.6986 29.6319C58.0181 30.5863 58.1454 31.5945 58.0729 32.5984C58.0582 32.9672 57.9012 33.316 57.6349 33.5716C57.3687 33.8272 57.0138 33.9698 56.6447 33.9695Z" fill="#393D3F"/>
          </svg>
        </button>
      </div>

      <div class="button">
        <button 
          @click="maybe($event)"
          aria-label="This article was a little helpful"
          aria-pressed="false"
          class="aria-btn">
          <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="background" d="M36.1445 70.2566C54.9696 70.2566 70.2304 54.9096 70.2304 35.9782C70.2304 17.0467 54.9696 1.69971 36.1445 1.69971C17.3194 1.69971 2.05859 17.0467 2.05859 35.9782C2.05859 54.9096 17.3194 70.2566 36.1445 70.2566Z" fill="#C4C4C4"/>
            <circle cx="50%" cy="50%" r="0%" fill="#77B3C4">
              <animate 
                attributeName="r" 
                begin="maybe.begin"
                dur="0.2s" 
                from="0%" 
                to="50%"  
                keySplines=".17 .67 .83 .67"
                fill="freeze"
                id="maybe" />
            </circle>
            <path d="M36.1429 71.6849C29.1204 71.6849 22.2557 69.5908 16.4167 65.6673C10.5778 61.7438 6.02685 56.1671 3.33948 49.6426C0.652103 43.118 -0.0510367 35.9386 1.31897 29.0122C2.68899 22.0858 6.07062 15.7234 11.0362 10.7298C16.0019 5.73608 22.3284 2.33535 29.216 0.957595C36.1035 -0.420157 43.2426 0.286956 49.7305 2.98951C56.2184 5.69207 61.7637 10.2687 65.6651 16.1406C69.5666 22.0126 71.649 28.9161 71.649 35.9782C71.649 36.357 71.4994 36.7203 71.233 36.9882C70.9667 37.256 70.6054 37.4065 70.2287 37.4065C69.8521 37.4065 69.4908 37.256 69.2245 36.9882C68.9581 36.7203 68.8085 36.357 68.8085 35.9782C68.8085 29.4811 66.8927 23.1298 63.3033 17.7276C59.714 12.3255 54.6123 8.11496 48.6435 5.62861C42.6746 3.14226 36.1066 2.49171 29.7701 3.75924C23.4336 5.02678 17.6131 8.15545 13.0448 12.7496C8.4764 17.3438 5.3653 23.1972 4.10489 29.5695C2.84447 35.9418 3.49136 42.5469 5.96375 48.5494C8.43613 54.552 12.623 59.6825 17.9948 63.2921C23.3666 66.9018 29.6822 68.8284 36.1429 68.8284C36.5195 68.8284 36.8808 68.9789 37.1471 69.2467C37.4135 69.5146 37.5631 69.8779 37.5631 70.2567C37.5631 70.6355 37.4135 70.9988 37.1471 71.2666C36.8808 71.5345 36.5195 71.6849 36.1429 71.6849Z" fill="#393D3F"/>
            <path d="M60.0404 44.7003H12.2445C11.8678 44.7003 11.5065 44.5498 11.2402 44.282C10.9739 44.0141 10.8242 43.6508 10.8242 43.272C10.8242 42.8932 10.9739 42.5299 11.2402 42.2621C11.5065 41.9942 11.8678 41.8438 12.2445 41.8438H60.0404C60.4171 41.8438 60.7784 41.9942 61.0447 42.2621C61.3111 42.5299 61.4607 42.8932 61.4607 43.272C61.4607 43.6508 61.3111 44.0141 61.0447 44.282C60.7784 44.5498 60.4171 44.7003 60.0404 44.7003Z" fill="#393D3F"/>
            <path d="M27.6794 30.6842H15.6546C15.2779 30.6842 14.9167 30.5337 14.6504 30.2658C14.384 29.998 14.2344 29.6347 14.2344 29.2559C14.2344 28.8771 14.384 28.5138 14.6504 28.246C14.9167 27.9781 15.2779 27.8276 15.6546 27.8276H27.6794C28.056 27.8276 28.4173 27.9781 28.6836 28.246C28.95 28.5138 29.0996 28.8771 29.0996 29.2559C29.0996 29.6347 28.95 29.998 28.6836 30.2658C28.4173 30.5337 28.056 30.6842 27.6794 30.6842Z" fill="#393D3F"/>
            <path d="M56.6325 30.6842H44.6077C44.2311 30.6842 43.8698 30.5337 43.6035 30.2658C43.3371 29.998 43.1875 29.6347 43.1875 29.2559C43.1875 28.8771 43.3371 28.5138 43.6035 28.246C43.8698 27.9781 44.2311 27.8276 44.6077 27.8276H56.6325C57.0092 27.8276 57.3704 27.9781 57.6368 28.246C57.9031 28.5138 58.0527 28.8771 58.0527 29.2559C58.0527 29.6347 57.9031 29.998 57.6368 30.2658C57.3704 30.5337 57.0092 30.6842 56.6325 30.6842Z" fill="#393D3F"/>
          </svg>
        </button>
      </div>

      <div class="button">
        <button 
          @click="no($event)"
          aria-label="This article was not helpful"
          aria-pressed="false"
          class="aria-btn">
          <svg width="72" height="73" viewBox="0 0 72 73" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="background" d="M35.8722 70.6853C54.8037 70.6853 70.1507 55.3383 70.1507 36.4069C70.1507 17.4754 54.8037 2.12842 35.8722 2.12842C16.9407 2.12842 1.59375 17.4754 1.59375 36.4069C1.59375 55.3383 16.9407 70.6853 35.8722 70.6853Z" fill="#C4C4C4"/>
            <circle cx="50%" cy="50%" r="0%" fill="#E05E48">
              <animate 
                attributeName="r" 
                begin="no.begin"
                dur="0.2s" 
                from="0%" 
                to="50%"  
                keySplines=".17 .67 .83 .67"
                fill="freeze"
                id="no" />
            </circle>
            <path d="M35.8708 72.1136C28.8087 72.1136 21.9051 70.0195 16.0332 66.096C10.1613 62.1725 5.58465 56.5958 2.88209 50.0713C0.179534 43.5467 -0.527579 36.3673 0.850173 29.4409C2.22792 22.5145 5.62866 16.1521 10.6223 11.1585C15.616 6.16479 21.9783 2.76406 28.9048 1.38631C35.8312 0.00855428 43.0106 0.715667 49.5352 3.41822C56.0597 6.12078 61.6363 10.6974 65.5598 16.5693C69.4834 22.4413 71.5775 29.3448 71.5775 36.4069C71.5775 36.7857 71.427 37.149 71.1592 37.4169C70.8913 37.6847 70.528 37.8352 70.1492 37.8352C69.7704 37.8352 69.4072 37.6847 69.1393 37.4169C68.8715 37.149 68.721 36.7857 68.721 36.4069C68.721 29.9098 66.7943 23.5585 63.1847 18.1563C59.5751 12.7542 54.4446 8.54367 48.442 6.05732C42.4394 3.57097 35.8344 2.92042 29.462 4.18796C23.0897 5.45549 17.2364 8.58416 12.6422 13.1783C8.04803 17.7725 4.91935 23.6259 3.65182 29.9982C2.38429 36.3705 3.03483 42.9756 5.52119 48.9781C8.00754 54.9807 12.218 60.1112 17.6202 63.7209C23.0224 67.3305 29.3736 69.2571 35.8708 69.2571C36.2496 69.2571 36.6129 69.4076 36.8807 69.6754C37.1486 69.9433 37.2991 70.3066 37.2991 70.6854C37.2991 71.0642 37.1486 71.4275 36.8807 71.6953C36.6129 71.9632 36.2496 72.1136 35.8708 72.1136Z" fill="#393D3F"/>
            <path d="M57.6208 56.441C57.3294 56.4424 57.0448 56.3534 56.806 56.1863C56.5673 56.0192 56.3862 55.7822 56.2878 55.5079C54.5167 50.5566 45.2235 44.9577 35.835 45.1291C26.4465 45.3005 17.6484 49.7377 15.4583 55.4508C15.3913 55.6328 15.288 55.7993 15.1545 55.94C15.0211 56.0808 14.8604 56.1929 14.6822 56.2695C14.504 56.3462 14.3121 56.3857 14.1181 56.3857C13.9241 56.3857 13.7322 56.3462 13.554 56.2696C13.3684 56.2075 13.1981 56.1068 13.0542 55.9743C12.9102 55.8418 12.7958 55.6804 12.7185 55.5006C12.6412 55.3209 12.6028 55.1268 12.6056 54.9312C12.6085 54.7355 12.6526 54.5427 12.7351 54.3653C15.3631 47.4715 25.0373 42.3297 35.7207 42.1202C45.452 41.8727 56.5544 47.8333 58.9158 54.3843C58.9887 54.5652 59.0243 54.759 59.0204 54.954C59.0165 55.149 58.9732 55.3413 58.8932 55.5191C58.8132 55.697 58.698 55.8569 58.5546 55.9891C58.4112 56.1214 58.2426 56.2232 58.0588 56.2887C57.9217 56.3621 57.7739 56.4135 57.6208 56.441Z" fill="#393D3F"/>
            <path d="M21.3413 34.5028C20.3368 34.4399 19.3547 34.1787 18.4517 33.7341C17.5488 33.2895 16.7429 32.6704 16.0806 31.9125C15.4184 31.1546 14.9129 30.273 14.5933 29.3186C14.2738 28.3642 14.1465 27.356 14.219 26.3521C14.219 25.9733 14.3694 25.61 14.6373 25.3422C14.9051 25.0743 15.2684 24.9238 15.6472 24.9238C16.026 24.9238 16.3893 25.0743 16.6572 25.3422C16.925 25.61 17.0755 25.9733 17.0755 26.3521C16.9571 27.6163 17.3366 28.8768 18.1332 29.8655C18.9299 30.8542 20.0808 31.493 21.3413 31.6462C22.6017 31.493 23.7526 30.8542 24.5493 29.8655C25.3459 28.8768 25.7254 27.6163 25.607 26.3521C25.607 25.9733 25.7575 25.61 26.0254 25.3422C26.2932 25.0743 26.6565 24.9238 27.0353 24.9238C27.4141 24.9238 27.7774 25.0743 28.0452 25.3422C28.3131 25.61 28.4636 25.9733 28.4636 26.3521C28.536 27.356 28.4087 28.3642 28.0892 29.3186C27.7697 30.273 27.2642 31.1546 26.6019 31.9125C25.9396 32.6704 25.1338 33.2895 24.2308 33.7341C23.3279 34.1787 22.3458 34.4399 21.3413 34.5028Z" fill="#393D3F"/>
            <path d="M50.3999 34.5028C49.3954 34.4399 48.4133 34.1787 47.5103 33.7341C46.6074 33.2895 45.8015 32.6704 45.1392 31.9125C44.477 31.1546 43.9715 30.273 43.6519 29.3186C43.3324 28.3642 43.2051 27.356 43.2776 26.3521C43.2776 25.9733 43.428 25.61 43.6959 25.3422C43.9637 25.0743 44.327 24.9238 44.7058 24.9238C45.0846 24.9238 45.4479 25.0743 45.7158 25.3422C45.9836 25.61 46.1341 25.9733 46.1341 26.3521C46.0157 27.6163 46.3952 28.8768 47.1918 29.8655C47.9885 30.8542 49.1394 31.493 50.3999 31.6462C51.6603 31.493 52.8112 30.8542 53.6079 29.8655C54.4045 28.8768 54.784 27.6163 54.6656 26.3521C54.6656 25.9733 54.8161 25.61 55.084 25.3422C55.3518 25.0743 55.7151 24.9238 56.0939 24.9238C56.4727 24.9238 56.836 25.0743 57.1038 25.3422C57.3717 25.61 57.5222 25.9733 57.5222 26.3521C57.5946 27.356 57.4673 28.3642 57.1478 29.3186C56.8283 30.273 56.3228 31.1546 55.6605 31.9125C54.9982 32.6704 54.1924 33.2895 53.2894 33.7341C52.3865 34.1787 51.4044 34.4399 50.3999 34.5028Z" fill="#393D3F"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      selected: null,
      alert: false
    }
  },
  methods: {
    yes(event) {
      if(!this.selected) {
        document.querySelector('#yes').beginElement()
        this.selectButton(event)
      }
    },
    maybe(event) {
      if(!this.selected) {
        document.querySelector('#maybe').beginElement()
        this.selectButton(event)
      }
    },
    no(event) {
      if(!this.selected) {
        document.querySelector('#no').beginElement()
        this.selectButton(event)
      }
    },
    selectButton(event) {
      this.selected = true
      this.alert = true

      event.target.parentElement.parentElement.setAttribute('aria-pressed', 'true')

      const ariaBtns = document.querySelectorAll('.aria-btn')
      this.changeBtnFocus(ariaBtns, '-1')
    },
    changeBtnFocus(buttons, focus) {
      buttons.forEach(btn => {
        btn.setAttribute('tabindex', focus)
      })
    }
  }
}
</script>

<style lang="scss" scoped>
@import '@/assets/styles/variables.scss';

h3 {
  font-weight: 500;
}

.card {
  background: $med-grey;
  border-radius: $radius;
  padding: 1em;
}

.faces {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

button {
  background: transparent;
  border: none;
  padding: 0;
  box-shadow: none;

  .background {
    fill: #C4C4C4;
  }

  &.selected {
    .background {
      fill: #FFD275;
    }
  }
}
</style>
